{"version":3,"sources":["uni-app:///main.js","webpack:////Users/forever/project/MySource/OpenSource/photo/pages/index/index.vue?48bd","webpack:////Users/forever/project/MySource/OpenSource/photo/pages/index/index.vue?66f9","webpack:////Users/forever/project/MySource/OpenSource/photo/pages/index/index.vue?f0f3","webpack:////Users/forever/project/MySource/OpenSource/photo/pages/index/index.vue?2e98","uni-app:///pages/index/index.vue","webpack:////Users/forever/project/MySource/OpenSource/photo/pages/index/index.vue?7ce7"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","l0","_self","_c","getImageList","m0","showSwitch","m1","_isMounted","e0","$event","item","index","_temp","arguments","length","currentTarget","dataset","_temp2","eventParams","imageClick","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;yEAAA,qBACA,sBACA,yC,mDACAA,EAAWC,a;;;;2DCHX,sQACIC,EADJ,wMASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,wBACZ,aAAAF,E;;;;2GCvBf;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,gBACTC,EAAKR,EAAIS,YAAY,GACrBC,EAAKV,EAAIS,WAAW,GAEnBT,EAAIW,aACPX,EAAIY,GAAK,SAASC,EAAQC,EAAMC,GAC9B,IAAIC,EAAQC,UAAUA,UAAUC,OAAS,GAAGC,cAAcC,QACxDC,EAASL,EAAMM,aAAeN,EAAM,gBACpCF,EAAOO,EAAOP,KACdC,EAAQM,EAAON,MAIjB,OAAOf,EAAIuB,WAAWT,EAAMC,KAIhCf,EAAIwB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLxB,GAAIA,EACJI,GAAIA,EACJE,GAAIA,MAKRmB,GAAmB,EACnBC,EAAkB,GACtB/B,EAAOgC,eAAgB;;;;2DCnCvB,w5BAAk2B,eAAG;;;;yMC0Dr2B,8CACA,sD,+WACA,OACA,CACA,QACA,aACA,YACA,WACA,CACA,UACA,sCAEA,CACA,UACA,sCAEA,CACA,UACA,sCAEA,CACA,UACA,sCAEA,CACA,UACA,sCAEA,CACA,UACA,sCAEA,CACA,UACA,sCAEA,CACA,UACA,sCAEA,CACA,UACA,sCAEA,CACA,WACA,wCAIA,CACA,QACA,aACA,YACA,WACA,CACA,UACA,yCAEA,CACA,UACA,yCAEA,CACA,UACA,yCAEA,CACA,UACA,yCAEA,CACA,UACA,yCAEA,CACA,UACA,2CAIA,CACA,QACA,aACA,YACA,WACA,CACA,UACA,wCAEA,CACA,UACA,wCAEA,CACA,UACA,wCAEA,CACA,UACA,wCAEA,CACA,UACA,wCAEA,CACA,UACA,wCAEA,CACA,UACA,0CAIA,CACA,QACA,WACA,YACA,WACA,CACA,UACA,uCAEA,CACA,UACA,0C,EAKA,CACA,KADA,WAEA,OACA,UACA,eACA,kCACA,YACA,QACA,eACA,8CACA,eACA,cAGA,OAdA,WAeA,WACA,SACA,kBACA,oBACA,eAEA,qBAEA,aAEA,6BACA,OACA,4BACA,sBACA,6BACA,0BACA,oBACA,kBAIA,2BACA,OACA,4BACA,sBACA,6BACA,0BACA,oBACA,kBAIA,SACA,aADA,SACA,GACA,iFACA,qBACA,iEACA,CACA,iEACA,KACA,gCACA,kCACA,qDACA,gDAIA,WAfA,SAeA,GACA,iEACA,EACA,iCACA,iFACA,UAEA,QAtBA,WAsBA,kIACA,cADA,uBAEA,aACA,eACA,cAJA,0CASA,eACA,cAEA,gCAZA,UAaA,qBACA,QACA,qBACA,YAGA,8BACA,0BACA,kBACA,qDAEA,kCACA,GACA,CACA,aACA,mBACA,KACA,KACA,aALA,SAKA,GACA,OACA,eACA,0BAOA,uDAEA,cA3CA,OAaA,EAbA,OA8CA,uEACA,oCACA,aAhDA,qDAkDA,gBACA,wBACA,0CApDA,6DAuDA,UA7EA,WA+EA,0BACA,+BACA,QAFA,SAEA,GACA,aACA,mBAMA,SAzFA,WA2FA,WACA,cACA,QADA,SACA,GACA,wCAwBA,mBAvBA,aACA,+BACA,QAFA,WAIA,oBAEA,KANA,SAMA,GACA,gBACA,cACA,mCACA,iBACA,gBACA,oBAEA,WACA,2BAaA,eA3HA,SA2HA,GACA,WAKA,0BACA,uBACA,mBACA,gBACA,aACA,aACA,eAGA,iBACA,gBACA,aACA,aACA,kBAWA,gBAzJA,SAyJA,cACA,kCACA,gBACA,MACA,oBACA,qBAEA,GADA,SACA,qBAEA,OADA,MACA,EAEA,MAEA,iBACA,YAKA,WA5KA,SA4KA,KACA,oBACA,yBAEA,aAhLA,WAiLA,yCACA,qBAEA,uBAEA,UAtLA,SAsLA,GACA,oBACA,oCACA,iBAEA,eAEA,KA7LA,WA8LA,6CAEA,eAhMA,SAgMA,GACA,WACA,kBACA,gBACA,QAFA,SAEA,GACA,OACA,YACA,sBACA,+BACA,QACA,qBAEA,uBACA,sDACA,yCACA,UAEA,KAfA,SAeA,U;;;;4DC9bA,olDAAuiD,eAAG","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.getImageList()\n  var m0 = _vm.showSwitch(-1)\n  var m1 = _vm.showSwitch(1)\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event, item, index) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item,\n        index = _temp2.index\n\n      var _temp, _temp2\n\n      return _vm.imageClick(item, index)\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        m0: m0,\n        m1: m1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<image src=\"../../static/background.jpg\" class=\"all-back\"></image>\r\n\t\t<view class=\"top-content\">\r\n\t\t\t<view class=\"top-title\">\r\n\t\t\t\t<view class=\"title-unit\" :class=\"{ 'title-select': item.selected }\" v-for=\"(item, index) in imageList\" :key=\"item.key\" @click=\"itemClick(item)\">\r\n\t\t\t\t\t{{ item.title }}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<scroll-view scroll-x :show-scrollbar=\"false\" class=\"scroll-view\">\r\n\t\t\t\t<view class=\"image-div\">\r\n\t\t\t\t\t<image\r\n\t\t\t\t\t\t:class=\"{ 'image-margin': index !== 0 }\"\r\n\t\t\t\t\t\t@click=\"imageClick(item, index)\"\r\n\t\t\t\t\t\tv-for=\"(item, index) in getImageList()\"\r\n\t\t\t\t\t\t:src=\"item.src\"\r\n\t\t\t\t\t\t:key=\"item.key\"\r\n\t\t\t\t\t></image>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"image-card\">\r\n\t\t\t<view class=\"photo-main-view\">\r\n\t\t\t\t<!--  -->\r\n\t\t\t\t<view class=\"avatar-div \" id=\"avatar-container\">\r\n\t\t\t\t\t<image class=\"img\" id=\"avatar-img\" :src=\"avatarImage\"></image>\r\n\r\n\t\t\t\t\t<view class=\"empty-view \" v-if=\"!avatarImage\"><image class=\"empty\"\n\t\t\t\t\t src=\"../../static/images/avatar_empty.svg\"></image></view>\r\n\r\n\t\t\t\t\t<image class=\"avatar-default \" :src=\"currentFrame\" v-if=\"currentFrame\"></image>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"ctlbtn\">\r\n\t\t\t\t\t<view class=\"icon-div btn-margin\">\r\n\t\t\t\t\t\t<view class=\"icon-zuo iconfont\" v-if=\"showSwitch(-1)\" @click=\"switchAvatar(-1)\"></view>\r\n\t\t\t\t\t\t<view class=\"icon-you iconfont\" v-if=\"showSwitch(1)\" @click=\"switchAvatar(1)\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"userInfo\" class=\"action-btn btn-margin\" @click=\"getUserProfile()\">获取头像</view>\r\n\t\t\t\t\t<button class=\"action-btn btn-margin\" v-else open-type=\"getUserInfo\" @click=\"getUserProfile()\">获取头像</button>\r\n\t\t\t\t\t<button class=\"action-btn btn-primary\" @click=\"shareFc()\">保存头像</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"hideCanvasView\">\r\n\t\t\t<canvas\r\n\t\t\t\tclass=\"hideCanvas\"\r\n\t\t\t\tid=\"default_PosterCanvasId\"\r\n\t\t\t\tcanvas-id=\"default_PosterCanvasId\"\r\n\t\t\t\t:style=\"{ width: (poster.width || 10) + 'px', height: (poster.height || 10) + 'px' }\"\r\n\t\t\t></canvas>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport _app from '@/util/QS-SharePoster/app.js';\r\nimport { getSharePoster } from '@/util/QS-SharePoster/QS-SharePoster.js';\r\nconst IMAGE_LIST = [\r\n\t{\r\n\t\tkey: '1',\r\n\t\ttitle: '国庆新款',\r\n\t\tselected: true,\r\n\t\timageList: [\r\n\t\t\t{\r\n\t\t\t\tkey: '1.1',\r\n\t\t\t\tsrc: '../../static/images/new/NA.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.2',\r\n\t\t\t\tsrc: '../../static/images/new/NB.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.3',\r\n\t\t\t\tsrc: '../../static/images/new/NC.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.4',\r\n\t\t\t\tsrc: '../../static/images/new/ND.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.9',\r\n\t\t\t\tsrc: '../../static/images/new/NE.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.6',\r\n\t\t\t\tsrc: '../../static/images/new/NF.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.7',\r\n\t\t\t\tsrc: '../../static/images/new/NG.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.8',\r\n\t\t\t\tsrc: '../../static/images/new/NH.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.9',\r\n\t\t\t\tsrc: '../../static/images/new/NI.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.10',\r\n\t\t\t\tsrc: '../../static/images/new/NJ.png'\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\tkey: '2',\r\n\t\ttitle: '渐变国旗',\r\n\t\tselected: false,\r\n\t\timageList: [\r\n\t\t\t{\r\n\t\t\t\tkey: '1.1',\r\n\t\t\t\tsrc: '../../static/images/gradual/1.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.2',\r\n\t\t\t\tsrc: '../../static/images/gradual/2.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.3',\r\n\t\t\t\tsrc: '../../static/images/gradual/3.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.4',\r\n\t\t\t\tsrc: '../../static/images/gradual/4.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.5',\r\n\t\t\t\tsrc: '../../static/images/gradual/5.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.6',\r\n\t\t\t\tsrc: '../../static/images/gradual/6.png'\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\tkey: '3',\r\n\t\ttitle: '质朴国旗',\r\n\t\tselected: false,\r\n\t\timageList: [\r\n\t\t\t{\r\n\t\t\t\tkey: '1.1',\r\n\t\t\t\tsrc: '../../static/images/simple/2.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.2',\r\n\t\t\t\tsrc: '../../static/images/simple/3.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.3',\r\n\t\t\t\tsrc: '../../static/images/simple/4.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.4',\r\n\t\t\t\tsrc: '../../static/images/simple/5.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.5',\r\n\t\t\t\tsrc: '../../static/images/simple/6.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.6',\r\n\t\t\t\tsrc: '../../static/images/simple/7.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.7',\r\n\t\t\t\tsrc: '../../static/images/simple/8.png'\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\tkey: '4',\r\n\t\ttitle: '其他',\r\n\t\tselected: false,\r\n\t\timageList: [\r\n\t\t\t{\r\n\t\t\t\tkey: '1.1',\r\n\t\t\t\tsrc: '../../static/images/other/1.png'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: '1.2',\r\n\t\t\t\tsrc: '../../static/images/other/2.png'\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n];\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tposter: {},\r\n\t\t\tposterImage: '',\r\n\t\t\tcanvasId: 'default_PosterCanvasId',\r\n\t\t\tuserInfo: '',\r\n\t\t\tcode: '',\r\n\t\t\tavatarImage: '',\r\n\t\t\tcurrentFrame: '../../static/images/new/NA.png',\r\n\t\t\tcurrentIndex: 0,\r\n\t\t\timageList: IMAGE_LIST\r\n\t\t};\r\n\t},\r\n\tonLoad() {\r\n\t\tlet _this = this;\r\n\t\tuni.login({\r\n\t\t\tprovider: 'weixin',\r\n\t\t\tsuccess: function(loginRes) {\r\n\t\t\t\t_this.code = loginRes.code;\r\n\t\t\t},\r\n\t\t\tfail: function(result) {}\r\n\t\t});\r\n\t\tthis.init();\r\n\t},\r\n\tonShareAppMessage: function() {\r\n\t\treturn {\r\n\t\t\ttitle: '我刚刚换上了国庆头像，你也来领取一个吧',\r\n\t\t\tdesc: '领取你的国庆头像，为祖国加油',\r\n\t\t\timageUrl: '/static/share.jpg',\r\n\t\t\tpath: '/pages/index/index',\r\n\t\t\tsuccess: function(e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tonShareTimeline: function() {\r\n\t\treturn {\r\n\t\t\ttitle: '我刚刚换上了国庆头像，你也来领取一个吧',\r\n\t\t\tdesc: '领取你的国庆头像，为祖国加油',\r\n\t\t\timageUrl: '/static/share.jpg',\r\n\t\t\tpath: '/pages/index/index',\r\n\t\t\tsuccess: function(e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tswitchAvatar(num) {\r\n\t\t\tif ((num > 0 && this.currentIndex < this.getImageList().length - 1) || (num < 0 && this.currentIndex > 0)) {\r\n\t\t\t\tthis.currentIndex += num;\r\n\t\t\t\tthis.currentFrame = this.getImageList()[this.currentIndex].src;\r\n\t\t\t} else {\r\n\t\t\t\tlet currentType = this.imageList.findIndex(data => data.selected);\r\n\t\t\t\tcurrentType += num;\r\n\t\t\t\tif (currentType >= 0 && currentType < this.imageList.length) {\r\n\t\t\t\t\tthis.itemClick(this.imageList[currentType]);\r\n\t\t\t\t\tthis.currentIndex = num < 0 ? this.getImageList().length - 1 : 0;\r\n\t\t\t\t\tthis.currentFrame = this.getImageList()[0].src;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowSwitch(val) {\r\n\t\t\tlet currentType = this.imageList.findIndex(data => data.selected);\r\n\t\t\tlet res =\r\n\t\t\t\t(val < 0 && currentType <= 0 && this.currentIndex <= 0) ||\r\n\t\t\t\t(val > 0 && currentType >= this.imageList.length - 1 && this.currentIndex >= this.getImageList().length - 1);\r\n\t\t\treturn !res;\r\n\t\t},\r\n\t\tasync shareFc() {\r\n\t\t\tif (!this.avatarImage) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请先获取头像',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\t_app.log('准备生成:' + new Date());\r\n\t\t\t\tconst d = await getSharePoster({\r\n\t\t\t\t\t_this: this, //若在组件中使用 必传\r\n\t\t\t\t\ttype: 'testShareType',\r\n\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t//访问接口获取背景图携带自定义数据\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbackgroundImage: this.avatarImage,\r\n\t\t\t\t\tposterCanvasId: this.canvasId, //canvasId\r\n\t\t\t\t\tdelayTimeScale: 20, //延时系数\r\n\t\t\t\t\tdrawArray: ({ bgObj, type, bgScale }) => {\r\n\t\t\t\t\t\t//可直接return数组，也可以return一个promise对象, 但最终resolve一个数组, 这样就可以方便实现后台可控绘制海报\r\n\t\t\t\t\t\treturn new Promise((rs, rj) => {\r\n\t\t\t\t\t\t\trs([\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttype: 'image',\r\n\t\t\t\t\t\t\t\t\turl: this.currentFrame,\r\n\t\t\t\t\t\t\t\t\tdx: 0,\r\n\t\t\t\t\t\t\t\t\tdy: 0,\r\n\t\t\t\t\t\t\t\t\tinfoCallBack(imageInfo) {\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\tdWidth: bgObj.width, // 因为设置了圆形图片 所以要乘以2\r\n\t\t\t\t\t\t\t\t\t\t\tdHeight: bgObj.height\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsetCanvasWH: ({ bgObj, type, bgScale }) => {\r\n\t\t\t\t\t\t// 为动态设置画布宽高的方法，\r\n\t\t\t\t\t\tthis.poster = bgObj;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t_app.log('海报生成成功, 时间:' + new Date() + '， 临时路径: ' + d.poster.tempFilePath);\r\n\t\t\t\tthis.posterImage = d.poster.tempFilePath;\r\n\t\t\t\tthis.savefile();\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\t_app.hideLoading();\r\n\t\t\t\t_app.showToast(JSON.stringify(e));\r\n\t\t\t}\r\n\t\t},\r\n\t\tsaveImage() {\r\n\t\t\t// #ifndef H5\r\n\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\tfilePath: this.poster.finalPath,\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '保存成功'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tsavefile() {\r\n\t\t\t//获取相册授权\r\n\t\t\tlet _self = this;\r\n\t\t\tuni.getSetting({\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tif (!res.authSetting['scope.writePhotosAlbum']) {\r\n\t\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\t\tscope: 'scope.writePhotosAlbum',\r\n\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t//这里是用户同意授权后的回调\r\n\t\t\t\t\t\t\t\t_self.saveImgToLocal();\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\twx.showModal({\r\n\t\t\t\t\t\t\t\t\tcontent: '检测到您没打开下载图片功能权限，是否去设置打开？',\r\n\t\t\t\t\t\t\t\t\tconfirmText: '确认',\r\n\t\t\t\t\t\t\t\t\tcancelText: '取消',\r\n\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\t//点击“确认”时打开设置页面\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\twx.openSetting();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//用户已经授权过了\r\n\t\t\t\t\t\t_self.saveImgToLocal();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tsaveImgToLocal(e) {\r\n\t\t\tlet _self = this;\r\n\t\t\t// uni.downloadFile({\r\n\t\t\t// \turl: _self.posterImage, //图片地址\r\n\t\t\t// \tsuccess: res => {\r\n\t\t\t// \t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: _self.posterImage,\r\n\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '保存成功',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: function(AAAA) {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '保存失败',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t// \t\t}\r\n\t\t\t// \t},\r\n\t\t\t// \tfail: res => {\r\n\t\t\t// \t\tuni.hideLoading();\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\t\t},\r\n\t\tgetNetworkImage(url) {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\turl,\r\n\t\t\t\t\tsuccess: e => {\r\n\t\t\t\t\t\tconst p = e.tempFilePath; //这个就是jpg地址\r\n\t\t\t\t\t\tthis.pic0 = p;\r\n\t\t\t\t\t\tif (p.indexOf('json') > -1) {\r\n\t\t\t\t\t\t\treject(p);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresolve(p);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: r => {\r\n\t\t\t\t\t\treject(r);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\timageClick(item, index) {\r\n\t\t\tthis.currentIndex = index;\r\n\t\t\tthis.currentFrame = item.src;\r\n\t\t},\r\n\t\tgetImageList() {\r\n\t\t\tlet item = this.imageList.filter(data => {\r\n\t\t\t\treturn data.selected;\r\n\t\t\t});\r\n\t\t\treturn item[0].imageList;\r\n\t\t},\r\n\t\titemClick(item) {\r\n\t\t\tthis.currentIndex = 0;\r\n\t\t\tthis.imageList.forEach(data => {\r\n\t\t\t\tdata.selected = false;\r\n\t\t\t});\r\n\t\t\titem.selected = true;\r\n\t\t},\r\n\t\tinit() {\r\n\t\t\tthis.userInfo = uni.getStorageSync('user_info');\r\n\t\t},\r\n\t\tgetUserProfile(e) {\r\n\t\t\tlet _this = this;\r\n\t\t\tuni.getUserProfile({\r\n\t\t\t\tdesc: '获取您的头像信息',\r\n\t\t\t\tsuccess(result) {\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\tcode: _this.code,\r\n\t\t\t\t\t\tsignature: result.signature,\r\n\t\t\t\t\t\tencrypted_data: result.encryptedData,\r\n\t\t\t\t\t\tiv: result.iv,\r\n\t\t\t\t\t\tuserInfo: result.userInfo\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlet info = data.userInfo.avatarUrl;\r\n\t\t\t\t\t_this.avatarImage = info.substring(0, info.lastIndexOf('/') + 1) + '0';\r\n\t\t\t\t\tuni.setStorageSync('user_info', data.userInfo);\r\n\t\t\t\t\t_this.init();\r\n\t\t\t\t},\r\n\t\t\t\tfail(fall) {}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.content {\r\n\tbackground-size: 100% 100%;\r\n\tpadding-top: 200rpx;\r\n\t.all-back {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tmin-height: 100vh;\r\n\t\twidth: 750rpx;\r\n\t}\r\n\t.top-content {\r\n\t\twidth: 610rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tmargin: 30rpx;\r\n\t\tborder-radius: 50rpx;\r\n\t\tpadding: 0 40rpx 30rpx;\r\n\t\tposition: relative;\r\n\t\t.top-title {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\t.title-unit {\r\n\t\t\t\tpadding: 40rpx 20rpx;\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t}\r\n\t\t\t.title-select {\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tcolor: #ff4500;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.image-div {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding-left: 20rpx;\r\n\t\t\tpadding-bottom: 20rpx;\r\n\t\t\tbackground-color: #ffffff;\r\n\t\t\timage {\r\n\t\t\t\twidth: 120rpx;\r\n\t\t\t\theight: 120rpx;\r\n\t\t\t\tborder: 1rpx solid #f8f8f8;\r\n\t\t\t\tbox-shadow: 0px -5px 15px 0px rgba(224, 224, 224, 0.4);\r\n\t\t\t\tflex-shrink: 0;\r\n\t\t\t}\r\n\t\t\t.image-margin {\r\n\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.image-card {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tposition: relative;\r\n\t\t.image-center {\r\n\t\t\twidth: 300rpx;\r\n\t\t\theight: 300rpx;\r\n\t\t\tborder-radius: 50rpx;\r\n\t\t\tmargin: 0 70rpx;\r\n\t\t}\r\n\t\t.iconfont {\r\n\t\t\tcolor: #f7f8fa;\r\n\t\t\tfont-size: 80rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t}\r\n\t}\r\n\t.btn-div {\r\n\t\tpadding: 50rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\t.btn-left {\r\n\t\t\tbackground-color: #f7f8fa;\r\n\t\t\tbox-shadow: 0px 4px 54px 0px rgba(108, 108, 108, 0.14);\r\n\t\t\tpadding: 0 70rpx;\r\n\t\t\theight: 100rpx;\r\n\t\t\tline-height: 100rpx;\r\n\t\t\tborder-radius: 80rpx;\r\n\t\t\tcolor: #646566;\r\n\t\t\tfont-weight: bold;\r\n\t\t}\r\n\t\t.btn-right {\r\n\t\t\tbackground-image: linear-gradient(90deg, #ff8c00, #ff4500);\r\n\t\t\tpadding: 0 100rpx;\r\n\t\t\theight: 100rpx;\r\n\t\t\tline-height: 100rpx;\r\n\t\t\tborder-radius: 80rpx;\r\n\t\t\tcolor: #ffffff;\r\n\t\t\tfont-weight: bold;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.title {\r\n\tfont-size: 36rpx;\r\n\tcolor: #8f8f94;\r\n}\r\n\r\n.avatar-div {\r\n\theight: 380rpx;\r\n\tmargin-right: 40rpx;\r\n\tposition: relative;\r\n\twidth: 380rpx;\r\n}\r\n\r\n.avatar-div,\r\n.empty-view {\r\n\t-webkit-box-orient: vertical;\r\n\t-webkit-box-direction: normal;\r\n\t-webkit-box-pack: center;\r\n\t-webkit-box-align: center;\r\n\talign-items: center;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\tz-index: 1;\r\n}\r\n\r\n.empty {\r\n\theight: 100px;\r\n\tmargin-bottom: 24px;\r\n\twidth: 100px;\r\n}\r\n\r\n.img {\r\n\tbackground-color: #fff;\r\n\tborder-radius: 48rpx;\r\n\theight: 360rpx;\r\n\tposition: absolute;\r\n\twidth: 360rpx;\r\n\tz-index: 0;\r\n}\r\n\r\n.avatar-default {\r\n\tborder-radius: 48rpx;\r\n\theight: 100%;\r\n\tleft: 0;\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\twidth: 100%;\r\n\tz-index: 10;\r\n}\r\n\r\n.container {\r\n\tbackground-color: #fbebe1;\r\n\tmin-height: 100vh;\r\n\toverflow: hidden;\r\n}\r\n.photo-main-view {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\twidth: 690rpx;\r\n\tmargin: 30rpx 30rpx 0;\r\n}\r\n.icon-div {\r\n\tposition: relative;\r\n\theight: 80rpx;\r\n\t.icon-zuo {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t}\r\n\t.icon-you {\r\n\t\tposition: absolute;\r\n\t\tright: 0;\r\n\t}\r\n}\r\n.action-btn {\r\n\tbackground: #fff;\r\n\tborder: 1rpx solid #efefef;\r\n\tborder-radius: 48rpx;\r\n\tbox-shadow: 0 12rpx 16rpx -8rpx rgba(0, 0, 0, 0.1);\r\n\tcolor: #4d4d4d;\r\n\tfont-weight: bolder;\r\n\theight: 90rpx;\r\n\tline-height: 90rpx;\r\n\tfont-size: 30rpx;\r\n\tpadding: 0 60rpx;\r\n}\r\n.btn-margin {\r\n\tmargin-bottom: 50rpx;\r\n}\r\n.btn-primary {\r\n\tbackground: linear-gradient(97.71deg, #ffa462, #ff4d42 88.36%);\r\n\tborder: 1rpx solid #ff7852;\r\n\tborder-radius: 48rpx;\r\n\tbox-shadow: 0 12rpx 16rpx -8rpx rgba(255, 88, 35, 0.6);\r\n\tcolor: #fff;\r\n}\r\n\r\n.hideCanvasView {\r\n\tposition: relative;\r\n}\r\n\r\n.hideCanvas {\r\n\tposition: fixed;\r\n\ttop: -99999upx;\r\n\tleft: -99999upx;\r\n\tz-index: -99999;\r\n}\r\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}